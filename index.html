<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>IdeaFlow</title>
</head>

<body>

<h1>IdeaFlow</h1>
<p>Capture e organize suas ideias</p>

<textarea id="ideaInput" placeholder="Digite sua ideia"></textarea>
<br><br>

<input id="tagsInput" placeholder="Tags (ex: app, ia, startup)">
<br><br>

<button id="saveBtn">Salvar ideia</button>

<hr>

<input id="searchInput" placeholder="Pesquisar ideias">
<br><br>

<ul id="ideasList"></ul>

<script>
  // ELEMENTOS
  const ideaInput = document.getElementById("ideaInput");
  const tagsInput = document.getElementById("tagsInput");
  const saveBtn = document.getElementById("saveBtn");
  const ideasList = document.getElementById("ideasList");
  const searchInput = document.getElementById("searchInput");

  // DADOS
  let ideas = JSON.parse(localStorage.getItem("ideas")) || [];

  // SALVAR NO STORAGE
  function saveIdeas() {
    localStorage.setItem("ideas", JSON.stringify(ideas));
  }

  // RENDERIZAR IDEIAS
  function renderIdeas() {
    ideasList.innerHTML = "";
    const search = searchInput.value.toLowerCase();

    ideas
      .filter(idea =>
        idea.text.toLowerCase().includes(search) ||
        idea.tags.some(tag => tag.includes(search))
      )
      .forEach(idea => {
        const li = document.createElement("li");

        li.innerHTML = `
          <strong>${idea.text}</strong><br>
          <small>${idea.tags.map(t => "#" + t).join(" ")}</small><br><br>
          <button data-edit="${idea.id}">Editar</button>
          <button data-delete="${idea.id}">Excluir</button>
        `;

        ideasList.appendChild(li);
      });
  }

  // SALVAR IDEIA
  saveBtn.onclick = function () {
    const text = ideaInput.value.trim();
    if (!text) {
      alert("Digite uma ideia");
      return;
    }

    const tags = tagsInput.value
      .split(",")
      .map(t => t.trim().toLowerCase())
      .filter(Boolean);

    ideas.push({
      id: Date.now(),
      text,
      tags
    });

    saveIdeas();
    ideaInput.value = "";
    tagsInput.value = "";
    renderIdeas();
  };

  // AÇÕES (EDITAR / EXCLUIR)
  ideasList.onclick = function (e) {
    const editId = e.target.dataset.edit;
    const deleteId = e.target.dataset.delete;

    if (editId) {
      const idea = ideas.find(i => i.id == editId);
      const newText = prompt("Editar ideia:", idea.text);
      if (newText) {
        idea.text = newText;
        saveIdeas();
        renderIdeas();
      }
    }

    if (deleteId) {
      ideas = ideas.filter(i => i.id != deleteId);
      saveIdeas();
      renderIdeas();
    }
  };

  // PESQUISA
  searchInput.oninput = renderIdeas;

  // INICIAL
  renderIdeas();
</script>

</body>
</html>
