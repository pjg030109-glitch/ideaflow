<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>IdeaFlow</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #020617;
  color: #e5e7eb;
  display: flex;
  height: 100vh;
}

aside {
  width: 260px;
  padding: 20px;
  border-right: 1px solid #1e293b;
}

main {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
}

input, textarea, select {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #1e293b;
  background: #020617;
  color: #e5e7eb;
}

button {
  margin-top: 10px;
  padding: 10px;
  background: #2563eb;
  border: none;
  border-radius: 8px;
  color: white;
  cursor: pointer;
}

.idea {
  background: #0f172a;
  padding: 14px;
  border-radius: 12px;
  margin-bottom: 12px;
}

.idea-title {
  cursor: pointer;
  color: #60a5fa;
}

.tag {
  display: inline-block;
  background: #2563eb;
  padding: 4px 8px;
  border-radius: 999px;
  font-size: 0.7rem;
  margin-right: 4px;
}
</style>
</head>

<body>

<aside>
  <h3>üîç Pesquisar</h3>
  <input id="searchInput" placeholder="Buscar ideias">
</aside>

<main id="app"></main>

<script>
let ideas = JSON.parse(localStorage.getItem("ideas")) || [];

/* ---------- ROUTER ---------- */
const params = new URLSearchParams(location.search);
const ideaId = params.get("id");

if (ideaId) {
  renderIdeaPage(Number(ideaId));
} else {
  renderListPage();
}

/* ---------- LIST PAGE ---------- */
function renderListPage() {
  app.innerHTML = `
    <h1>IdeaFlow</h1>

    <textarea id="newIdea" placeholder="Nova ideia..."></textarea>
    <input id="newTags" placeholder="Tags (ex: app, IA)">
    <button onclick="addIdea()">Salvar ideia</button>

    <div id="list"></div>
  `;

  searchInput.oninput = renderIdeas;
  renderIdeas();
}

function renderIdeas() {
  const list = document.getElementById("list");
  const search = searchInput.value.toLowerCase();

  list.innerHTML = "";

  ideas
    .filter(i => i.content.toLowerCase().includes(search))
    .forEach(i => {
      const div = document.createElement("div");
      div.className = "idea";
      div.innerHTML = `
        <div class="idea-title" onclick="openIdea(${i.id})">${i.content}</div>
        <div>${i.tags.map(t => `<span class="tag">#${t}</span>`).join("")}</div>
      `;
      list.appendChild(div);
    });
}

/* ---------- ADD ---------- */
function addIdea() {
  const content = newIdea.value.trim();
  if (!content) return;

  ideas.unshift({
    id: Date.now(),
    content,
    tags: newTags.value ? newTags.value.split(",").map(t => t.trim()) : [],
    details: ""
  });

  save();
  newIdea.value = "";
  newTags.value = "";
  renderIdeas();
}

/* ---------- IDEA PAGE ---------- */
function renderIdeaPage(id) {
  const idea = ideas.find(i => i.id === id);
  if (!idea) return;

  app.innerHTML = `
    <button onclick="goBack()">‚Üê Voltar</button>

    <h2 contenteditable="true"
        onblur="updateContent(${id}, this.innerText)">
      ${idea.content}
    </h2>

    <h4>üß† Desenvolvimento</h4>
    <textarea onblur="updateDetails(${id}, this.value)">
      ${idea.details}
    </textarea>
  `;
}

/* ---------- EDIT INLINE ---------- */
function updateContent(id, text) {
  const idea = ideas.find(i => i.id === id);
  idea.content = text.trim();
  save();
}

function updateDetails(id, text) {
  const idea = ideas.find(i => i.id === id);
  idea.details = text;
  save();
}

/* ---------- UTILS ---------- */
function openIdea(id) {
  location.search = "?id=" + id;
}

function goBack() {
  location.search = "";
}

function save() {
  localStorage.setItem("ideas", JSON.stringify(ideas));
}
</script>

</body>
</html>


</body>
</html>
