<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>IdeaFlow</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #020617;
      color: #e5e7eb;
    }

    header {
      text-align: center;
      padding: 30px 20px;
    }

    header h1 {
      margin: 0;
      font-size: 2.4rem;
    }

    header p {
      color: #94a3b8;
    }

    .container {
      max-width: 800px;
      margin: auto;
      padding: 20px;
    }

    .box {
      background: #020617;
      border: 1px solid #1e293b;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 25px;
    }

    input, textarea {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      border-radius: 10px;
      border: 1px solid #1e293b;
      background: #020617;
      color: #e5e7eb;
    }

    button {
      margin-top: 12px;
      padding: 12px;
      width: 100%;
      border: none;
      border-radius: 10px;
      background: #2563eb;
      color: white;
      font-size: 1rem;
      cursor: pointer;
    }

    .top-actions {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    .idea-card {
      background: #0f172a;
      padding: 16px;
      border-radius: 14px;
      margin-bottom: 14px;
    }

    .tag {
      display: inline-block;
      background: #2563eb;
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 0.75rem;
      margin-right: 6px;
    }

    .actions {
      margin-top: 8px;
      text-align: right;
    }

    .actions button {
      background: none;
      border: none;
      color: #e5e7eb;
      font-size: 1.1rem;
      cursor: pointer;
      margin-left: 6px;
    }

    footer {
      text-align: center;
      padding: 30px;
      color: #64748b;
      font-size: 0.9rem;
    }

    .hidden {
      display: none;
    }
  </style>
</head>

<body>

<header>
  <h1>IdeaFlow</h1>
  <p>Ideias organizadas por vocÃª</p>
</header>

<div class="container">

  <!-- LOGIN -->
  <div id="loginBox" class="box">
    <h2>ğŸ” Login</h2>
    <input id="loginUser" placeholder="UsuÃ¡rio">
    <input id="loginPass" type="password" placeholder="Senha">
    <button onclick="login()">Entrar</button>
    <button onclick="showRegister()">Criar conta</button>
  </div>

  <!-- CADASTRO -->
  <div id="registerBox" class="box hidden">
    <h2>ğŸ†• Cadastro</h2>
    <input id="regUser" placeholder="UsuÃ¡rio">
    <input id="regPass" type="password" placeholder="Senha">
    <button onclick="register()">Cadastrar</button>
    <button onclick="showLogin()">Voltar</button>
  </div>

  <!-- APP -->
  <div id="appBox" class="hidden">

    <div class="box">
      <button onclick="logout()">ğŸšª Logout</button>
    </div>

    <div class="box">
      <h2>ğŸ’¡ Nova ideia</h2>
      <textarea id="ideaInput" placeholder="Digite sua ideia..."></textarea>
      <input id="tagsInput" placeholder="Tags (ex: app, IA, negÃ³cio)">
      <button onclick="addIdea()">Salvar ideia</button>
    </div>

    <div class="box">
      <h2>ğŸ” Pesquisar</h2>
      <input id="searchInput" placeholder="Pesquisar por texto ou tag" oninput="renderIdeas()">
    </div>

    <ul id="ideasList"></ul>
  </div>

</div>

<footer>
  IdeaFlow Â© GPJ
</footer>

<script>
  let currentUser = localStorage.getItem("currentUser");
  let users = JSON.parse(localStorage.getItem("users")) || {};
  let ideas = [];

  function saveUsers() {
    localStorage.setItem("users", JSON.stringify(users));
  }

  function showRegister() {
    loginBox.classList.add("hidden");
    registerBox.classList.remove("hidden");
  }

  function showLogin() {
    registerBox.classList.add("hidden");
    loginBox.classList.remove("hidden");
  }

  function register() {
    const u = regUser.value.trim();
    const p = regPass.value.trim();
    if (!u || !p) return alert("Preencha tudo");
    if (users[u]) return alert("UsuÃ¡rio jÃ¡ existe");

    users[u] = { password: p, ideas: [] };
    saveUsers();
    alert("Conta criada!");
    showLogin();
  }

  function login() {
    const u = loginUser.value.trim();
    const p = loginPass.value.trim();
    if (!users[u] || users[u].password !== p) {
      return alert("Login invÃ¡lido");
    }
    localStorage.setItem("currentUser", u);
    location.reload();
  }

  function logout() {
    localStorage.removeItem("currentUser");
    location.reload();
  }

  function addIdea() {
    const content = ideaInput.value.trim();
    const tagsRaw = tagsInput.value.trim();
    if (!content) return alert("Digite uma ideia!");

    const idea = {
      id: Date.now(),
      content,
      tags: tagsRaw ? tagsRaw.split(",").map(t => t.trim().toLowerCase()) : [],
      createdAt: new Date().toLocaleString()
    };

    ideas.unshift(idea);
    users[currentUser].ideas = ideas;
    saveUsers();
    renderIdeas();

    ideaInput.value = "";
    tagsInput.value = "";
  }

  function deleteIdea(id) {
    ideas = ideas.filter(i => i.id !== id);
    users[currentUser].ideas = ideas;
    saveUsers();
    renderIdeas();
  }

  function editIdea(id) {
    const idea = ideas.find(i => i.id === id);
    const txt = prompt("Editar ideia:", idea.content);
    if (!txt) return;
    idea.content = txt;
    saveUsers();
    renderIdeas();
  }

  function renderIdeas() {
    const search = searchInput.value.toLowerCase();
    ideasList.innerHTML = "";

    ideas
      .filter(i =>
        i.content.toLowerCase().includes(search) ||
        i.tags.some(t => t.includes(search))
      )
      .forEach(idea => {
        const li = document.createElement("li");
        li.innerHTML = `
          <div class="idea-card">
            <p>${idea.content}</p>
            <div>
              ${idea.tags.map(t => `<span class="tag">#${t}</span>`).join("")}
            </div>
            <small>${idea.createdAt}</small>
            <div class="actions">
              <button onclick="editIdea(${idea.id})">âœï¸</button>
              <button onclick="deleteIdea(${idea.id})">ğŸ—‘ï¸</button>
            </div>
          </div>
        `;
        ideasList.appendChild(li);
      });
  }

  if (currentUser && users[currentUser]) {
    loginBox.classList.add("hidden");
    appBox.classList.remove("hidden");
    ideas = users[currentUser].ideas || [];
    renderIdeas();
  }
</script>

</body>
</html>
